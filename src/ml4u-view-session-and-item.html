<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<link rel="import" href="ml4u-view-session.html">
<link rel="import" href="ml4u-view-item.html">


<dom-module id="ml4u-view-session-and-item">

<style is="custom-style">
</style>
<template>
  <button on-tap='switchView'>Switch View</button>
  <iron-pages selected="{{selectedView}}">
    <ml4u-view-session session-id="[[sessionId]]" selected-paper={{selectedPaper}}></ml4u-view-session>
    <ml4u-view-item id="viewItem" item-id="[[selectedPaper]]" displayed-within-session></ml4u-view-item>
  </iron-pages>
</template>

<script>
  Polymer({
    is: 'ml4u-view-session-and-item',
    properties: {
      selectedPaper: {
        type: String,
        observer: '_onSelectedPaperChanged'
      },
      selectedView: {
        type: Number,
        value: 0
      },
      sessionId: {
        type: String
      }
    },
    _onSelectedPaperChanged: function(newVal, oldVal) {
      if(newVal == undefined)
        return;
      this.selectedView = 1;
    },
    switchView: function() {
      this.selectedView = this.selectedView == 0 ? 1 : 0;
    },
    onBackButtonTapped: function() {
      this.selectedView = 0;
      this.selectedPaper = undefined;
    },
    resetState: function() {
      this.selectedView = 0;
      this.selectedPaper = undefined;
    },
    ready: function() {
      //back_button_tapped
      this.listen(this.$.viewItem, 'back_button_tapped', 'onBackButtonTapped');
    }
  });
  </script>
</dom-module>
